# Simple sprite generation pipeline
# Great for small indie games needing consistent unit sprites

name: "Game Unit Sprites"
version: "1.0"
description: |
  Generate pixel art sprites for a tactical RPG.
  Each unit needs a transparent sprite at multiple sizes.

# =============================================================================
# Types
# =============================================================================

types:
  GameSprite:
    name: text
    unit_class: infantry | cavalry | ranged | magic
    prompt: text
    sprite: image?              # Generated by pipeline

# =============================================================================
# State - where checkpoints are saved
# =============================================================================

state:
  directory: .artgen/

# =============================================================================
# Context & Assets
# =============================================================================

context:
  style: "16-bit pixel art, clean edges, limited palette"
  sizes: [32, 64, 128]

# Load units from external file, OR define inline
# To use external file: from_file: ./units.csv
assets:
  type: GameSprite
  # from_file: ./units.csv     # Uncomment to load from file
  items:
    - id: archer
      name: "Elven Archer"
      unit_class: ranged
      prompt: "Archer unit with bow, ready stance"
    - id: knight
      name: "Royal Knight"
      unit_class: infantry
      prompt: "Knight with sword and shield, defensive pose"
    - id: wizard
      name: "Battle Mage"
      unit_class: magic
      prompt: "Wizard with staff and robes, casting spell"
    - id: healer
      name: "Field Medic"
      unit_class: magic
      prompt: "Healer with glowing hands, serene expression"

# =============================================================================
# Steps
# =============================================================================

steps:
  # Generate sprites for each unit (runs in parallel)
  - id: generate
    type: generate_sprite
    for_each: asset
    save_to: sprites/{asset.id}/          # Save to folder per asset
    cache: skip_existing                   # Don't regenerate if exists
    config:
      prompt: "{context.style}, {asset.prompt}, game sprite, white background"
      variations: 3
      size: 512

  # User picks the best one
  - id: select_best
    type: user_select
    for_each: asset
    requires: [generate]
    save_to: sprites/{asset.id}/selected.json
    config:
      prompt: "Choose the best sprite for {asset.id}"

  # Export at multiple sizes
  - id: export
    type: resize
    for_each: asset
    requires: [select_best]
    save_to: sprites/{asset.id}/sizes/    # Multiple size outputs
    config:
      sizes: [32, 64, 128]
      format: png
